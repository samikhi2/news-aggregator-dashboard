<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Aggregator Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .news-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .news-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <header class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 shadow-lg">
        <div class="max-w-6xl mx-auto">
            <h1 class="text-4xl font-bold mb-2">üì∞ News Aggregator Dashboard</h1>
            <p class="text-blue-100">Real-time headlines from top news sources</p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8">
        <!-- Navigation Tabs -->
        <div class="flex gap-4 mb-8 flex-wrap">
            <button class="source-tab active px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition" data-source="cnn">
                üóûÔ∏è CNN
            </button>
            <button class="source-tab px-6 py-2 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition" data-source="bbc">
                üåç BBC News
            </button>
            <button class="source-tab px-6 py-2 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition" data-source="ap">
                üì° AP News
            </button>
        </div>

        <!-- Loading State -->
        <div id="loading" class="hidden text-center py-12">
            <div class="inline-block">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
            </div>
            <p class="mt-4 text-gray-600">Loading headlines...</p>
        </div>

        <!-- News Grid -->
        <div id="news-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- News cards will be inserted here -->
        </div>
    </main>

    <!-- Summary Modal -->
    <div id="summary-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-2xl w-full max-h-96 overflow-y-auto p-6 shadow-xl">
            <div class="flex justify-between items-start mb-4">
                <h2 class="text-2xl font-bold text-gray-800">Article Summary</h2>
                <button id="close-modal" class="text-gray-500 hover:text-gray-700 font-bold text-xl">√ó</button>
            </div>
            <div id="summary-content" class="text-gray-700 leading-relaxed mb-4">
                <!-- Summary content will be inserted here -->
            </div>
            <div id="summary-sources" class="text-sm text-gray-600 border-t pt-4">
                <!-- Sources will be listed here -->
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const API_KEY = "YOUR_NEWS_API_KEY_HERE";
        const GEMINI_API_KEY = "YOUR_GEMINI_API_KEY_HERE";
        const GEMINI_MODEL = "gemini-2.5-flash-preview-09-2025";

        let currentSource = "cnn";
        let newsData = {};

        // Mock news data for fallback
        const mockNewsData = {
            cnn: [
                {
                    title: "Breaking: Technology Advances in 2025",
                    description: "Latest developments in AI and machine learning are reshaping industries globally.",
                    urlToImage: "https://via.placeholder.com/300x200?text=CNN+Tech",
                    url: "#",
                    source: { name: "CNN" },
                    publishedAt: new Date().toISOString()
                },
                {
                    title: "Global Markets Show Strong Growth",
                    description: "International markets are experiencing unprecedented growth with new economic initiatives.",
                    urlToImage: "https://via.placeholder.com/300x200?text=CNN+Business",
                    url: "#",
                    source: { name: "CNN" },
                    publishedAt: new Date().toISOString()
                },
                {
                    title: "Climate Action: New Renewable Energy Records",
                    description: "Renewable energy sources reach all-time high in global power generation.",
                    urlToImage: "https://via.placeholder.com/300x200?text=CNN+Climate",
                    url: "#",
                    source: { name: "CNN" },
                    publishedAt: new Date().toISOString()
                }
            ],
            bbc: [
                {
                    title: "International Summit Promotes Peace Initiative",
                    description: "World leaders gather to discuss collaborative approaches to global challenges.",
                    urlToImage: "https://via.placeholder.com/300x200?text=BBC+World",
                    url: "#",
                    source: { name: "BBC" },
                    publishedAt: new Date().toISOString()
                },
                {
                    title: "Science Breakthrough in Medical Research",
                    description: "Researchers announce significant progress in treating previously incurable diseases.",
                    urlToImage: "https://via.placeholder.com/300x200?text=BBC+Science",
                    url: "#",
                    source: { name: "BBC" },
                    publishedAt: new Date().toISOString()
                },
                {
                    title: "Cultural Events Celebrate Global Diversity",
                    description: "International arts festivals showcase talent from across the world.",
                    urlToImage: "https://via.placeholder.com/300x200?text=BBC+Culture",
                    url: "#",
                    source: { name: "BBC" },
                    publishedAt: new Date().toISOString()
                }
            ],
            ap: [
                {
                    title: "Sports: Historic Championship Victory",
                    description: "Teams compete in thrilling matches with record-breaking performances.",
                    urlToImage: "https://via.placeholder.com/300x200?text=AP+Sports",
                    url: "#",
                    source: { name: "AP" },
                    publishedAt: new Date().toISOString()
                },
                {
                    title: "Entertainment: New Film Festival Announced",
                    description: "Filmmakers and artists prepare for the year's most anticipated cultural event.",
                    urlToImage: "https://via.placeholder.com/300x200?text=AP+Entertainment",
                    url: "#",
                    source: { name: "AP" },
                    publishedAt: new Date().toISOString()
                },
                {
                    title: "Health: Wellness Trends for 2025",
                    description: "Experts share insights on maintaining health and well-being in the modern world.",
                    urlToImage: "https://via.placeholder.com/300x200?text=AP+Health",
                    url: "#",
                    source: { name: "AP" },
                    publishedAt: new Date().toISOString()
                }
            ]
        };

        // Initialize the application
        document.addEventListener("DOMContentLoaded", () => {
            // Set up event listeners for source tabs
            document.querySelectorAll(".source-tab").forEach(tab => {
                tab.addEventListener("click", (e) => {
                    document.querySelectorAll(".source-tab").forEach(t => {
                        t.classList.remove("bg-blue-600");
                        t.classList.add("bg-gray-600");
                    });
                    e.target.classList.remove("bg-gray-600");
                    e.target.classList.add("bg-blue-600");
                    currentSource = e.target.dataset.source;
                    renderNews();
                });
            });

            // Close modal button
            document.getElementById("close-modal").addEventListener("click", () => {
                document.getElementById("summary-modal").classList.add("hidden");
            });

            // Fetch and display news
            fetchNews();
        });

        async function fetchNews() {
            document.getElementById("loading").classList.remove("hidden");
            try {
                // Using mock data for demonstration
                newsData = mockNewsData;
                renderNews();
            } catch (error) {
                console.error("Error fetching news:", error);
                newsData = mockNewsData;
                renderNews();
            } finally {
                document.getElementById("loading").classList.add("hidden");
            }
        }

        function renderNews() {
            const articles = newsData[currentSource] || [];
            const container = document.getElementById("news-container");
            container.innerHTML = "";

            articles.forEach(article => {
                const card = document.createElement("div");
                card.className = "news-card bg-white rounded-lg overflow-hidden shadow-md hover:shadow-xl";
                
                const image = article.urlToImage || "https://via.placeholder.com/300x200?text=No+Image";
                const date = new Date(article.publishedAt).toLocaleDateString();
                
                card.innerHTML = `
                    <img src="${image}" alt="${article.title}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <p class="text-xs text-gray-500 uppercase tracking-wide">${article.source.name}</p>
                        <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">${article.title}</h3>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-2">${article.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-xs text-gray-500">${date}</span>
                            <div class="flex gap-2">
                                <button class="summarize-btn px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 transition" data-title="${article.title.replace(/"/g, '&quot;')}">‚ú® Summarize</button>
                                <a href="${article.url}" target="_blank" class="px-3 py-1 bg-gray-200 text-gray-800 text-sm rounded hover:bg-gray-300 transition">Read</a>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });

            // Add event listeners to summarize buttons
            document.querySelectorAll(".summarize-btn").forEach(btn => {
                btn.addEventListener("click", (e) => {
                    handleSummarizeClick(e.target.dataset.title);
                });
            });
        }

        async function handleSummarizeClick(headline) {
            document.getElementById("summary-modal").classList.remove("hidden");
            document.getElementById("summary-content").innerHTML = "<p class='text-gray-600'>Generating summary...</p>";
            document.getElementById("summary-sources").innerHTML = "";

            try {
                const summary = await generateGeminiContent(headline);
                document.getElementById("summary-content").innerHTML = `<p>${summary}</p>`;
            } catch (error) {
                console.error("Error generating summary:", error);
                document.getElementById("summary-content").innerHTML = "<p>Unable to generate summary at this time.</p>";
            }
        }

        async function generateGeminiContent(headline) {
            // Mock response for demonstration
            return `This headline discusses important developments in ${headline.toLowerCase()}. The story appears to be significant in its category and has garnered attention from news organizations worldwide. Further details are available in the full article.`;
        }
    </script>
</body>
</html>
